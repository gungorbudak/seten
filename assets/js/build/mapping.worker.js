!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/seten/assets/js/build/",t(t.s=0)}([function(e,n,t){"use strict";importScripts("../libs/jstat.js");function r(e,n){if(1==e.length)return e[0];var t=void 0!==n?n:"max";return"max"==t?jStat.max(e):"mean"==t?jStat.mean(e):"median"==t?jStat.median(e):"min"==t?jStat.min(e):"sum"==t?jStat.sum(e):void 0}function o(e,n){var t,r,o=function(e){var n=new XMLHttpRequest,t={},r=0;return n.open("GET","/seten/assets/resources/mappings/"+e+".json",!1),n.send(null),200===n.status&&(JSON.parse(n.responseText).forEach((function(e){""!=e.symbol&&(t.hasOwnProperty(e.chrName)||(t[e.chrName]=[]),t[e.chrName].push(e),r++)})),console.log("[mappingWorker] Got "+r+" mappings")),t}(n),a={};return e.forEach((function(e){t=e.split(/\s/),(r=function(e,n,t,r){var o=e,a=n.toUpperCase(),s=parseInt(t),i=parseInt(r),u=[];return a.indexOf("CHR")||(a=a.replace(/CHR/g,"")),"M"==a&&(a="MT"),o.hasOwnProperty(a)&&(u=o[a].filter((function(e){return e.start<i&&e.end>s}))),u}(o,t[0],t[1],t[2])).length>0&&r.forEach((function(e){a.hasOwnProperty(e.symbol)||(a[e.symbol]=[]),a[e.symbol].push(parseFloat(t[4]))}))})),a}onmessage=function(e){var n,t,a=(new Date).getTime(),s=e.data.organism;if("undefined"!=typeof FileReader)(n=new FileReader).onload=function(e){u(e.target.result,s)},n.readAsText(e.data.file);else{var i=(n=new FileReaderSync).readAsText(e.data.file);u(i,s)}var u=function(e,n){var s,i=e.trim().split(/\r?\n/),u=i[0].split(/\s/).length,l=[];for(var p in s=u>2?o(i,n):function(e){var n,t={};return e.forEach((function(e){n=e.split(/\s/),t.hasOwnProperty(n[0])||(t[n[0]]=[]),t[n[0]].push(parseFloat(n[1]))})),t}(i))l.push({gene:p,score:r(s[p])});u>2&&console.log("[mappingWorker] Got "+i.length+" binding events"),console.log("[mappingWorker] Got "+l.length+" gene level scores"),t=(new Date).getTime(),console.log("[mappingWorker] Did mapping in "+(t-a)/1e3+" seconds"),postMessage(l)}}}]);